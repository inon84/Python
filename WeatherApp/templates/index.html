<!DOCTYPE html>
<html>
    <head>
        {% block head %}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Inon Weather App</title>
        <meta name="description" content="weather app">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="static/weather.ico" type="image/x-icon">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
        {% endblock %}
    </head>
    <body>
        <div class="time container-fluid">
            {% block time %}
                <p>{{ now_local.strftime('%X | %A, %d %B, %Y') }} <b>(now_local)</b></p>
                <p>{{ now }} <b>(UTC)</b></p>
                <p>{{ now_utc.strftime('%X | %A, %d %B, %Y') }} <b>(now_utc)</b></p>
            {% endblock time %}
        </div>

        <div class="search container col-auto">
            <form action ="/search" method="get">
                <input type="text" class="form-control" name="city" id="city" placeholder="Search city...">
                <button type="submit" value ="submit" class="btn btn-primary btn-blue">Go!</button>
            </form>
        </div>

        {% block weather %}
        <div class="weather container-fluid">
            <div class="card text-dark bg-link text-center">
                {# <figure class="figure"> #}
                    {# <img src="static/rawImage.jpeg" class="img-fluid rounded float-start d-block" width="150" alt=""> #}
                {# </figure> #}
                <div class="card-body align-items-center">
                    <h1 class="weather-city card-title">{{ weather.city }}, {{ weather.country }}</h1>
                    <span>
                        <h6 class="weather-description text-muted card-subtitle">{{ weather.main_description }} ({{ weather.description }})</h6>
                        <figure class="figure">
                            <img src="https://openweathermap.org/img/w/{{ weather.icon }}.png" class="img-fluid" alt="{{ weather.main_description }}">
                        </figure>
                        <h3 class="card-subtitle">Current: {{ weather.temperature }}&#8451;</h3>
                    </span>
                    <p class="card-subtitle text-muted">Sunrise: {{ weather.sunrise }}</p>
                    <p class="card-subtitle text-muted">Sunset: {{ weather.sunset }}</p>
                    <p></p>
                    
                    <p class="forecast-city-population card-subtitle text-muted">Timezone: {{ weather.timezone }}</p>                  
                    <p class="forecast-city-population card-subtitle text-muted">Population: {{ forecast.population }}</p>                  
                </div>
                <div class="weather-forecast container-fluid">
                    <h3 class="text-muted">Five Day Forecast</h3>
                    <div class="row align-items-center">
                    {% for cast in forecast.forecastlist %}
                        {# {{ icon = cast['weather']['icon'] }} #}
                        <div class="col">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">{{ cast['dt'] }}</h5>
                                    <figure class="figure">
                                        <img src="https://openweathermap.org/img/w/{{ cast['weather']['icon'] }}.png" class="img-fluid" alt="{{ weather.main_description }}">
                                    </figure>
                                    <h6 class="card-subtitle text-muted"> {{ cast['weather']['main'] }}</h6>
                                    <h6 class="card-subtitle text-muted"> {{ cast['main']['temp'] }}&#8451;</h6>
                                    <p class="card-text">{{ cast['main']['humidity'] }}% Humidity</p>
                                    <p class="card-text">Should feel like {{ cast['main']['feels_like'] }}&#8451;</p>
                                    {# <p class="card-text">Should feel like {{ cast['weather']['feels_like'] }}&#8451;</p> #}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        {% endblock weather %}
        
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
    </body>
</html>
